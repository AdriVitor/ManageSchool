CREATE DATABASE ManageSchool;

USE ManageSchool;


CREATE TABLE SCHOOL(
    [ID] INT NOT NULL IDENTITY(1,1),
    [NAME] VARCHAR(50) NOT NULL,

    PRIMARY KEY([ID])
);


CREATE TABLE STUDENT(
    [ID] INT NOT NULL IDENTITY(1,1),
    [IDSCHOOL] INT NOT NULL,
    [IDSCHOOLCLASSROOM] INT NOT NULL,
    [NAME] VARCHAR(60) NOT NULL,
    [EMAIL] VARCHAR(120),
    [PASSWORD] VARCHAR(25),
    [DATEOFBIRTH] DATE,

    PRIMARY KEY([ID]),
    FOREIGN KEY([IDSCHOOL]) REFERENCES SCHOOL([ID]),
    FOREIGN KEY([IDSCHOOLCLASSROOM]) REFERENCES SCHOOLCLASSROOM([ID])
);


CREATE TABLE SCHOOLCLASSROOM(
    [ID] INT NOT NULL IDENTITY(1,1),
    [IDSCHOOL] INT NOT NULL,
    [NAME] VARCHAR(20) NOT NULL,

    PRIMARY KEY([ID]),
    FOREIGN KEY([IDSCHOOL]) REFERENCES SCHOOL([ID])
);


CREATE TABLE TEACHER(
    [ID] INT NOT NULL IDENTITY(1,1),
    [IDSCHOOL] INT NOT NULL,
    [NAME] VARCHAR(60) NOT NULL,
    [EMAIL] VARCHAR(120),
    [PASSWORD] VARCHAR(25),

    PRIMARY KEY([ID]),
    FOREIGN KEY([IDSCHOOL]) REFERENCES SCHOOL([ID])
);


CREATE TABLE SCHOOLSUBJECTS(
    [ID] INT NOT NULL IDENTITY(1,1),
    [IDSCHOOL] INT NOT NULL,
    [IDTEACHER] INT NOT NULL,
    [NAME] VARCHAR(60) NOT NULL,
    [GRADESTUDENT] SMALLINT NOT NULL,

    PRIMARY KEY([ID]),
    FOREIGN KEY([IDSCHOOL]) REFERENCES SCHOOL([ID]),
    FOREIGN KEY([IDTEACHER]) REFERENCES TEACHER([ID])
);

CREATE TABLE [SCHOOLGRADESSTUDENT](
    [ID] INT NOT NULL IDENTITY(1,1),
    [IDSCHOOLSUBJECT] INT NOT NULL,
    [IDSTUDENT] INT NOT NULL,
    [IDSCHOOL] INT NOT NULL,
    [SEMESTER] INT,
    [GRADE] INT,
    [APPROVED] BIT,
    
    PRIMARY KEY([ID]),
    FOREIGN KEY([IDSCHOOLSUBJECT]) REFERENCES SCHOOLSUBJECTS([ID]),
    FOREIGN KEY([IDSTUDENT]) REFERENCES STUDENT([ID]),
    FOREIGN KEY([IDSCHOOL]) REFERENCES SCHOOL([ID])
)

